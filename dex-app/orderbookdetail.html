<!DOCTYPE html>
<html lang="en" >
    <!-- begin::Head -->
    <head>
        <meta charset="utf-8"/>
        <title>Hedera DEX</title>
        <meta name="description" content="Latest updates and statistic charts">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="0" />
        <!--begin::Fonts -->
        <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
        <script>
            WebFont.load({

                google: {
"families":[
"Poppins:300,400,500,600,700"]},

                active: function() {

                    sessionStorage.fonts = true;
                }
            });
        </script>
        <!--end::Fonts -->
        <!--begin::Page Vendors Styles(used by this page) -->
        <link href="./assets/vendors/custom/datatables/datatables.bundle.css" rel="stylesheet" type="text/css" />
          <!--end::Page Vendors Styles -->
          <!--begin:: Global Mandatory Vendors -->
  <link href="./assets/vendors/general/perfect-scrollbar/css/perfect-scrollbar.css" rel="stylesheet" type="text/css" />
  <!--end:: Global Mandatory Vendors -->

  <!--begin:: Global Optional Vendors -->
  <link href="./assets/vendors/general/tether/dist/css/tether.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/bootstrap-datepicker/dist/css/bootstrap-datepicker3.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/bootstrap-datetime-picker/css/bootstrap-datetimepicker.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/bootstrap-timepicker/css/bootstrap-timepicker.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/bootstrap-select/dist/css/bootstrap-select.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/nouislider/distribute/nouislider.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/owl.carousel/dist/assets/owl.carousel.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/owl.carousel/dist/assets/owl.theme.default.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/dropzone/dist/dropzone.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/summernote/dist/summernote.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/bootstrap-markdown/css/bootstrap-markdown.min.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/animate.css/animate.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/toastr/build/toastr.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/morris.js/morris.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/sweetalert2/dist/sweetalert2.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/general/socicon/css/socicon.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/custom/vendors/line-awesome/css/line-awesome.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/custom/vendors/flaticon/flaticon.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/custom/vendors/flaticon2/flaticon.css" rel="stylesheet" type="text/css" />
  <link href="./assets/vendors/custom/vendors/fontawesome5/css/all.min.css" rel="stylesheet" type="text/css" />
  <!--end:: Global Optional Vendors -->

  <!--begin::Global Theme Styles(used by all pages) -->

          <link href="./assets/demo/demo3/base/style.bundle.css" rel="stylesheet" type="text/css" />
          <!--end::Global Theme Styles -->
        <link rel="shortcut icon" href="./images/favicon.ico" />

        <link href="css/custom-styles.css" rel="stylesheet">
    </head>
    <!-- end::Head -->
    <!-- begin::Body -->
    <body class="k-page--fixed k-header--fixed k-header--minimize-menu k-header-mobile--fixed k-subheader--enabled k-subheader--transparent k-page--loading" >
        <!-- begin::Page loader -->
        <!-- end::Page Loader -->
        <!-- begin:: Page -->
        <!-- begin:: Header Mobile -->
        <div id="k_header_mobile" class="k-header-mobile k-header-mobile--fixed " >
            <div><br/><h2>Hedera DEX</h2></div>
            <div class="k-header-mobile__toolbar">
                <button class="k-header-mobile__toolbar-toggler" id="k_header_mobile_toggler"><span></span></button>
                <button class="k-header-mobile__toolbar-topbar-toggler" id="k_header_mobile_topbar_toggler"><i class="flaticon-more"></i></button>
            </div>
        </div>
        <!-- end:: Header Mobile -->
        <div class="k-grid k-grid--hor k-grid--root">
            <div class="k-grid__item k-grid__item--fluid k-grid k-grid--ver k-page">
                <div class="k-grid__item k-grid__item--fluid k-grid k-grid--hor k-wrapper " id="k_wrapper">
                    <!-- begin:: Header -->
                    <div id="k_header" class="k-header k-grid__item k-header--fixed " data-kheader-minimize="on" style="background-image: url(./assets/demo/demo3/media/layout/header-bg.jpg)">
                        <div class="k-header__top">
                            <div class="k-container">
                                <!-- begin:: Brand -->
                                <div class="k-header__brand k-grid__item" id="k_header_brand">
                                    <h1 style="color:white">Hedera DEX</h1>
                                </div>
                                <!-- end:: Brand -->
                                <!-- begin:: Topbar -->
                                <div class="k-header__topbar">
                                    <!--begin: Quick Panel Toggler -->
                                    <div class="k-header__topbar-item" data-toggle="k-tooltip" title="Quick panel" data-placement="top">
                                        <div class="k-header__topbar-wrapper">
                                            <span class="k-header__topbar-icon" id="k_quick_panel_toggler_btn"><i class="flaticon-grid-menu"></i></span>
                                        </div>
                                    </div>
                                    <!--end: Quick Panel Toggler -->
                                    <!--begin: Network -->
                                    <div class="k-header__topbar-item k-header__topbar-item--langs">
                                        <div class="k-header__topbar-wrapper" data-toggle="dropdown" data-offset="20px 10px">

                                        </div>

                                    </div>
                                    <!--end: Languages -->

                                </div>
                                <!-- end:: Topbar -->
                            </div>
                        </div>
                        <div class="k-header__bottom">
                            <div class="k-container">
                                <!-- begin: Header Menu -->
                                <button class="k-header-menu-wrapper-close" id="k_header_menu_mobile_close_btn"><i class="la la-close"></i></button>
                                <div class="k-header-menu-wrapper" id="k_header_menu_wrapper">
                                    <div id="k_header_menu" class="k-header-menu k-header-menu-mobile " >
                                        <ul class="k-menu__nav ">

                                            <li class="k-menu__item k-menu__item--open k-menu__item--here k-menu__item--submenu k-menu__item--rel k-menu__item--open k-menu__item--here" data-kmenu-submenu-toggle="click" aria-haspopup="true">
                                                <a href="index.html" class="k-menu__link"><span class="k-menu__link-text">Orderbooks</span></a>
                                            </li>

                                        </ul>
                                    </div>

                                </div>
                                <!-- end: Header Menu -->
                            </div>
                        </div>
                    </div>
                    <!-- end:: Header -->
                    <div class="k-grid__item k-grid__item--fluid k-grid k-grid--ver k-grid--stretch">
                        <div class="k-container k-body k-grid k-grid--ver" id="k_body">
                            <div class="k-grid__item k-grid__item--fluid k-grid k-grid--hor">
                                <!-- begin:: Subheader -->
                                <div class="k-subheader k-grid__item" id="k_subheader">
                                    <div class="k-subheader__main">

                                    </div>

                                </div>
                                <!-- end:: Subheader -->
                                <!-- begin:: Content -->
                                <div class="k-content k-grid__item k-grid__item--fluid" id="k_content">
                                    <!--begin::Dashboard 4-->
                                    <!--<nav aria-label="breadcrumb">
                          							<ol class="breadcrumb">
                          								<li class="breadcrumb-item"><a href="#">Orderbooks</a></li>
                          								<li class="breadcrumb-item active" aria-current="page"><span id="breadCrumbTokenName"></span></li>
                          							</ol>
                          						</nav>-->
                                      <div class="alert alert-warning d-none" role="alert" id="networkAlert">
                                        <div class="alert-icon"><i class="flaticon-warning"></i></div>
                                          <div class="alert-text">You are on a test network! Please switch to Main Ethereum Network from your MetaMask extension to use Hedera DEX on the mainnet.</div>
                                      </div>
                                      <div class="alert alert-danger d-none" role="alert" id="metaMaskAlert">
                          							<div class="alert-icon"><i class="flaticon-warning"></i></div>
                          						  	<div class="alert-text">This website needs MetaMask browser extension to be installed!</div>
                          						</div>
                                    <!--begin::Portlet-->
                                      <div class="k-portlet">
                                        <div class="k-portlet__head">
                                          <div class="k-portlet__head-label">
                                            <h1 class="k-portlet__head-title">My <span id="balanceHeaderTokenSymbol">ZIL</span> Orderbook Balance</h1>
                                          </div>

                                        </div>
                                        <div class="k-portlet__body">
                                          <!--begin::Section-->
                                          <div class="k-section">
                                            <div class="k-section__content">
                                              <div class="row">
                                      <div class="col-sm"><button type="button" class="btn btn-link" data-toggle="modal" data-target="#balanceModal" id="tokenBalance"><span id="balance-tokenName"></span>: <span id="token-balance">0</span></button><a href="#" class="btn btn-brand btn-upper btn-bold" id="getTokenBalance">Get Balance</a></div>
                                      <div class="col-sm"><button type="button" class="btn btn-link" data-toggle="modal" data-target="#balanceModal" id="ethBalance">ETHB: <span id="eth-balance">0</span></button><a href="#" class="btn btn-brand btn-upper btn-bold" id="getETHBBalance">Get Balance</a></div>
                                      </div>
                                      </div>
                                    </div>
                                  </div>
                                  </div>

                                      <!--begin::Portlet-->
                                        <div class="k-portlet">
                                          <div class="k-portlet__head">
                                            <div class="k-portlet__head-label">
                                              <h1 class="k-portlet__head-title" id="tokenSymbol"></h1>
                                            </div>

                                          </div>
                                          <div class="k-portlet__body">
                                            <!--begin::Section-->
                                            <div class="k-section">
                                              <div class="k-section__content">
                                                  <div class="row" style="margin-bottom:20px;">
                                                      <div class="col-sm-6">


                                                          <!--begin::Portlet-->
                                                        		<div class="k-portlet">
                                                        			<div class="k-portlet__head">
                                                        				<div class="k-portlet__head-label">
                                                        					<h3 class="k-portlet__head-title">Sell Orders</h3>
                                                        				</div>
                                                                <div class="k-portlet__head-toolbar">
                                                                  <div class="k-portlet__head-wrapper k-form">
                                                                      <div class="k-form__group k-form__group--inline k-margin-r-10">
                                                                      </div>
                                                                      <a href="#" class="btn btn-brand btn-upper btn-bold" data-toggle="modal" data-target="#orderModal" id="sellOrder">+ Sell Order</a>
                                                                  </div>
                                                              </div>
                                                        			</div>
                                                        			<div class="k-portlet__body">
                                                        				<!--begin::Section-->
                                                        				<div class="k-section">
                                                        					<div class="k-section__content">
                                                        						<table class="table table-striped table-bordered  m-table" id="sell-orders">

                                                        						</table>
                                                                    <div align="center" id="loadingDiv-sell">

                                                                          <a href="#" class="btn btn-brand btn-upper btn-bold" id="getSellOrders">Fetch Orders</a>

                                                                    </div>
                                                        					</div>
                                                        				</div>
                                                        				<!--end::Section-->
                                                        			</div>
                                                        			<!--end::Form-->
                                                        		</div>
                                                        		<!--end::Portlet-->
                                                      </div>
                                                      <div class="col-sm-6">
                                                          <!--<table id="buy-orders" class="table table-bordered table-hover" width="100%"></table>-->
                                                          <!--begin::Portlet-->
                                                        		<div class="k-portlet">
                                                        			<div class="k-portlet__head">
                                                        				<div class="k-portlet__head-label">
                                                        					<h3 class="k-portlet__head-title">Buy Orders</h3>
                                                        				</div>
                                                                <div class="k-portlet__head-toolbar">
                                                                  <div class="k-portlet__head-wrapper k-form">
                                                                      <div class="k-form__group k-form__group--inline k-margin-r-10">
                                                                      </div>
                                                                      <a href="#" class="btn btn-brand btn-upper btn-bold" data-toggle="modal" data-target="#orderModal" id="buyOrder">+ Buy Order</a>
                                                                  </div>
                                                              </div>
                                                        			</div>
                                                        			<div class="k-portlet__body">
                                                        				<!--begin::Section-->
                                                        				<div class="k-section">
                                                        					<div class="k-section__content">
                                                        						<table class="table table-striped table-bordered m-table" id="buy-orders">

                                                        						</table>
                                                                    <div align="center" id="loadingDiv-buy">
                                                                    <a href="#" class="btn btn-brand btn-upper btn-bold" id="getBuyOrders">Fetch Orders</a>
                                                                    </div>
                                                        					</div>
                                                        				</div>
                                                        				<!--end::Section-->
                                                        			</div>
                                                        			<!--end::Form-->
                                                        		</div>
                                                        		<!--end::Portlet-->
                                                      </div>

                                                  </div>

                                          </div>
                                      </div>
                                      </div>
                                      </div>
                                  		<!--end::Portlet-->


                                    <!--end::Row-->
                                    <!--end::Dashboard 4-->
                                </div>
                                <!-- end:: Content -->

                            </div>
                        </div>
                    </div>
                    <!-- begin:: Footer -->
                    <div class="k-footer k-grid__item" style="background-image: url(./assets/demo/demo3/media/layout/footer-bg.jpg)" id="k_footer">
                        <div class="k-container">
                            <div class="k-footer__top">
                                <div class="row">
                                    <div class="col-lg-4">
                                        <div class="k-footer__section">
                                            <h3 class="k-footer__title">
                                                About
                                            </h3>
                                            <div class="k-footer__about"> Hedera DEX is a community developed and supported DEX to facilitate decentralized exchange of Hedera based ERC20 tokens. </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="k-footer__section">
                                            <h3 class="k-footer__title">
                                                Grab the source code
                                            </h3>
                                            <div class="row">
                                                <div class="col">
                                                    <ul class="k-footer__nav">
                                                        <li><a href="#" class="k-link">Github</a></li>
                                                    </ul>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="k-footer__section">

                                            <div class="k-footer__social">
                                                <div class="k-footer__social-label"> Find us on Twitter: </div>
                                                <ul class="k-footer__social-nav">

                                                    <li>
                                                        <a href="https://twitter.com/hammadtariq"><i class="flaticon-twitter-logo-button"></i></a>
                                                    </li>

                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="k-footer__bottom">
                                <div class="k-footer__copyright"> <a href="#" target="_blank" class="k-link">Hedera DEX</a> </div>
                            </div>
                        </div>
                    </div>
                    <!-- end:: Footer -->
                </div>
            </div>
        </div>
        <!-- end:: Page -->

        <!-- begin:: Quick Panel -->
        <div id="k_quick_panel" class="k-offcanvas-panel">
            <div class="k-offcanvas-panel__nav">
                <ul class="nav nav-pills" role="tablist">
                    <li class="nav-item active"> <a class="nav-link active" data-toggle="tab" href="#k_quick_panel_tab_settings" role="tab">Settings</a> </li>
                </ul>
                <button class="k-offcanvas-panel__close" id="k_quick_panel_close_btn"><i class="flaticon2-delete"></i></button>
            </div>
            <div class="k-offcanvas-panel__body">
                <div class="tab-content">
                    <div class="tab-pane fade show k-offcanvas-panel__content k-scroll active" id="k_quick_panel_tab_settings" role="tabpanel">
                        <form class="k-form">
                            <div class="k-heading k-heading--space-sm">Cache</div>
                            <div class="form-group form-group-xs row">
                                <label class="col-8 col-form-label">Enable cache:</label>
                                <div class="col-4 k-align-right">
                                    <span class="k-switch k-switch--sm">
                                        <label>
                                            <input type="checkbox" checked="checked" name="quick_panel_cache_1" id="cache_button">
                                            <span></span>
                                        </label>
                                    </span>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- end:: Quick Panel -->
        <!-- begin:: Scrolltop -->
        <div id="k_scrolltop" class="k-scrolltop"> <i class="la la-arrow-up"></i> </div>
        <!-- end:: Scrolltop -->

        <!--Balance Modal-->
        <div class="modal" id="balanceModal">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">

              <!-- Modal Header -->
              <div class="modal-header">
                <h4 class="modal-title"><span id="tokenBalanceTitleInModal"></span></h4>
                <button type="button" class="close" data-dismiss="modal"></button>
              </div>

              <!-- Modal body -->
              <div class="modal-body">
                <form action="" id="balanceModalForm" autocomplete="off">
                  <input autocomplete="false" name="hidden" type="text" style="display:none;">
                  <!-- <div class="form-group">
                    <label for="tokenAddress">Unused Balance:</label>
                    <input type="number" class="form-control" id="withdrawBalanceAmount" step="any">
                    <button type="submit" id="withdrawBalanceModalBtn" class="btn btn-primary">Withdraw</button>
                  </div> -->
                  <div class="form-group">
                    <label for="tokenAddress">Deposit <span id="tokenDepositTitleInModal"></span>:</label>
                    <input type="number" class="form-control" id="depositBalanceAmount" step="any">
                    <button type="submit" id="depositBalanceModalBtn" class="btn btn-primary">Deposit</button>
                  </div>
                </form>
              </div>

            </div>
          </div>
        </div>

        <!--AlertModal -->
        <div class="modal" id="alertModal" tabindex="-1" role="dialog" style="z-index:1000000001;">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="alertModalText"></h5>
                <button type="button" class="close" id="alert-cross-close-btn" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="alertModalBody" style="word-wrap: break-word;">
              </div>
              <!-- Modal footer -->
              <div class="modal-footer">
                <button type="button" id="alert-close-btn" class="btn btn-danger" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>

        <!--Success Alert-->
        <div class="modal" id="successModal" tabindex="-1" role="dialog" style="z-index:1000000001;">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="successModalText"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="successModalBody" style="word-wrap: break-word;">
              </div>
              <!-- Modal footer -->
              <div class="modal-footer">
                <button type="button" class="btn btn-info" data-dismiss="modal">OK</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Loader Modal -->
        <div class="modal fade" id="loadMe" tabindex="-1" role="dialog" aria-labelledby="loadMeLabel">
          <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
              <div class="modal-body text-center">
                <div class="loader"></div>
                <div class="loader-txt" id="loader-txt">
                  <p>Creating reserve</p>
                </div>
              </div>
            </div>
          </div>
        </div>


        <!-- Modal for Sell Orders -->
        <div class="modal fade bd-example-modal-lg" id="orderModal">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">

              <!-- Modal Header -->
              <div class="modal-header">
                <h4 class="modal-title" id="orderModalTitle"></h4>
                <button type="button" class="close" data-dismiss="modal"></button>
              </div>

              <!-- Modal body -->
              <div class="modal-body">
                <form action="" id="orderModalForm" autocomplete="off">
                  <input autocomplete="false" name="hidden" type="text" style="display:none;">
                  <input type="hidden" id="hiddenOrderId" value="">
                  <div class="form-group">
                    <!--<label for="sourceToken">Source Token:</label>
                    <input type="text" class="form-control" id="sourceToken" required disabled>
                    <label for="destinationToken">Destination Token:</label>
                    <input type="text" class="form-control" id="destinationToken" required disabled>-->
                    <label for="sourceTokenQuantity"><span id="sourceToken">Source</span> Token Quantity:</label>
                    <input type="number" class="form-control" id="sourceTokenQuantity" placeholder="0.00" step="any" required>
                    <label for="desiredRate">Rate:</label>
                    <input type="number" class="form-control" id="desiredRate" placeholder="0.00" step="any" required>

                  </div>
                  <button type="submit" id="orderModalBtn" class="btn btn-primary">Submit</button>
                </form>
              </div>
            </div>
          </div>
        </div>

        <!-- Modal for Cancel Confirmation -->
        <div class="modal" id="confirmationModal" tabindex="-1" role="dialog" style="z-index:1000000001;">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="confirmationModalText">Confirmation</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="successModalBody" style="word-wrap: break-word;">
                Are you sure want to cancel this order?
              </div>
              <!-- Modal footer -->
              <div class="modal-footer">
                <button type="button" class="btn btn-default" id="modal-btn-si">Yes</button>
                <button type="button" class="btn btn-primary" id="modal-btn-no">No</button>
              </div>
            </div>
          </div>
        </div>


        <!-- Modal for Cancel Confirmation -->
        <div class="modal" id="confirmationModal" tabindex="-1" role="dialog" style="z-index:1000000001;">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="confirmationModalText">Confirmation</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="successModalBody" style="word-wrap: break-word;">
                Are you sure want to cancel this order?
              </div>
              <!-- Modal footer -->
              <div class="modal-footer">
                <button type="button" class="btn btn-default" id="modal-btn-si">Yes</button>
                <button type="button" class="btn btn-primary" id="modal-btn-no">No</button>
              </div>
            </div>
          </div>
        </div>

        <!--begin:: Toast markup-->
<div class="toast toast-custom toast-fill fade hide" role="alert" aria-live="assertive" aria-atomic="true" id="k_toast_1">
	<div class="toast-header">
		<i class="toast-icon flaticon2-attention-exclamation-triangular-signal k-font-danger"></i>
		<span class="toast-title" ></span>
		<small class="toast-time"></small>
	</div>
	<div class="toast-body">
	</div>
</div>
<!--end:: Toast markup-->

        <!-- begin::Global Config(global config for global JS sciprts) -->
        <script>
            var KAppOptions = {

    "colors": {

        "state": {

            "brand": "#4d5cf2",

            "metal": "#c4c5d6",

            "light": "#ffffff",

            "accent": "#00c5dc",

            "primary": "#5867dd",

            "success": "#34bfa3",

            "info": "#36a3f7",

            "warning": "#ffb822",

            "danger": "#fd3995",

            "focus": "#9816f4"
        },

        "base": {

            "label": [

                "#c5cbe3",

                "#a1a8c3",

                "#3d4465",

                "#3e4466"
            ],

            "shape": [

                "#f0f3ff",

                "#d9dffa",

                "#afb4d4",

                "#646c9a"
            ]
        }
    }
};
        </script>
        <!-- end::Global Config -->
        <!--begin:: Global Mandatory Vendors -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"
                integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="./assets/vendors/general/popper.js/dist/umd/popper.js" type="text/javascript"></script>
<script src="./assets/vendors/general/bootstrap/dist/js/bootstrap.min.js" type="text/javascript"></script>
<script src="./assets/vendors/general/js-cookie/src/js.cookie.js" type="text/javascript"></script>
<script src="./assets/vendors/general/moment/min/moment.min.js" type="text/javascript"></script>
<script src="./assets/vendors/general/tooltip.js/dist/umd/tooltip.min.js" type="text/javascript"></script>
<script src="./assets/vendors/general/perfect-scrollbar/dist/perfect-scrollbar.js" type="text/javascript"></script>
<script src="./assets/vendors/general/sticky-js/dist/sticky.min.js" type="text/javascript"></script>
<script src="./assets/vendors/general/wnumb/wNumb.js" type="text/javascript"></script>
<!--end:: Global Mandatory Vendors -->

<!--begin:: Global Optional Vendors -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"
                integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="./assets/vendors/general/popper.js/dist/umd/popper.js" type="text/javascript"></script>
<script src="./assets/vendors/general/bootstrap/dist/js/bootstrap.min.js" type="text/javascript"></script>
<script src="./assets/vendors/general/js-cookie/src/js.cookie.js" type="text/javascript"></script>
<script src="./assets/vendors/general/moment/min/moment.min.js" type="text/javascript"></script>
<script src="./assets/vendors/general/tooltip.js/dist/umd/tooltip.min.js" type="text/javascript"></script>
<script src="./assets/vendors/general/perfect-scrollbar/dist/perfect-scrollbar.js" type="text/javascript"></script>
<script src="./assets/vendors/general/sticky-js/dist/sticky.min.js" type="text/javascript"></script>
<script src="./assets/vendors/general/wnumb/wNumb.js" type="text/javascript"></script>
<!--end:: Global Mandatory Vendors -->

<!--begin:: Global Optional Vendors -->
<script src="./assets/vendors/general/jquery-form/dist/jquery.form.min.js" type="text/javascript"></script>
<script src="./assets/vendors/custom/vendors/bootstrap-multiselectsplitter/bootstrap-multiselectsplitter.min.js" type="text/javascript"></script>
<script src="./assets/vendors/general/bootstrap-select/dist/js/bootstrap-select.js" type="text/javascript"></script>
<script src="./assets/vendors/general/toastr/build/toastr.min.js" type="text/javascript"></script>
<!--end:: Global Optional Vendors -->

<!--begin::Global Theme Bundle(used by all pages) -->

        <script src="./assets/demo/demo3/base/scripts.bundle.js" type="text/javascript"></script>
        <!--end::Global Theme Bundle -->
        <!--begin::Page Vendors(used by this page) -->
        <script src="./assets/vendors/custom/datatables/datatables.bundle.js" type="text/javascript"></script>
        <!--end::Page Vendors -->
        <!--begin::Global App Bundle(used by all pages) -->
        <script src="./assets/app/scripts/bundle/app.bundle.js" type="text/javascript"></script>
        <!--end::Global App Bundle -->


        <script type="text/javascript" src="https://cdn.rawgit.com/indutny/bn.js/master/lib/bn.js"></script>
        <script src="https://cdn.hashingsystems.com/hash.js"></script>


        <script>

        //init the datatables to access them after add/update modals
        var buyOrdersTable = "";
        var sellOrdersTable = "";
        var myOrdersTable = "";
        var orderNum = ""; //used as a row number in the my orders table
        var tokenBalanceInWallet = "";
        var etherBalanceInWallet = "";
        var kncBalanceInWallet = "";




            toastr.options = {
              "closeButton": false,
              "debug": false,
              "newestOnTop": false,
              "progressBar": false,
              "positionClass": "toast-top-right",
              "preventDuplicates": false,
              "onclick": null,
              "showDuration": "300",
              "hideDuration": "1000",
              "timeOut": "5000",
              "extendedTimeOut": "1000",
              "showEasing": "swing",
              "hideEasing": "linear",
              "showMethod": "fadeIn",
              "hideMethod": "fadeOut"
            };

            var modalConfirm = function(callback){
                $("#confirmationModal").modal('show');

              $("#modal-btn-si").on("click", function(){
                callback(true);
                $("#confirmationModal").modal('hide');
              });

              $("#modal-btn-no").on("click", function(){
                callback(false);
                $("#confirmationModal").modal('hide');
              });
            };



            $(document).ready(async function($) {
              const urlParams = new URLSearchParams(window.location.search);
              const tokenSymbol = urlParams.get('tokenSymbol');
              const tokenAddress = urlParams.get('tokenAddress');
              const reserveContractAddress = urlParams.get('reserveContractAddress');

              document.getElementById('getBuyOrders').addEventListener('click',(e) => {
                  e.preventDefault();
                  getBuyOrderBook();
                  async function getBuyOrderBook(){
                    let data = {
                        contractid:"0.0.140062",
                        memo:"Getting Buy Order Book",
                        params:'["'+tokenSymbol+'"]',
                        amount:0,
                        abi:`[{"constant":false,"inputs":[{"name":"symbolName","type":"string"}],"name":"getBuyOrderBook", "outputs":[{"name":"","type":"uint256[]"},{"name":"","type":"uint256[]"}], "payable":false,"stateMutability":"nonpayable","type":"function"}]`
                    }



                    var res = await window.hash.triggerSmartContract(data)
                    console.log(res["result"]);

                    toastr.info("Fetching buy orders");
                    var ethToTokenArr = res["result"];
                    var indEthToTokenArr = [];
                    for (var i = 0; i < 1; i++) {
                      for (var i = 0; i < ethToTokenArr[0].length; i++) {
                        var everyOrderArr = [];
                        everyOrderArr.push(ethToTokenArr[1][i]);
                        everyOrderArr.push(ethToTokenArr[0][i]);
                        //everyOrderArr.push(ethToTokenArr[1][i]/ethToTokenArr[0][i]);
                        indEthToTokenArr.push(everyOrderArr);
                      }
                    }

                    buyOrdersTable = $('#buy-orders').DataTable({
                                data: indEthToTokenArr,
                                //bPaginate: false,
                                bFilter: false,
                                bInfo: false,
                                columns: [
                                    //{title: "ETHB"},
                                    {title: tokenSymbol},
                                    {title: "Rate"}
                                ],
                                responsive: true
                            }
                          );
                    $('#loadingDiv-buy').remove();

                  }

              })

              document.getElementById('getSellOrders').addEventListener('click',(e) => {
                  e.preventDefault();
                  getBuyOrderBook();
                  async function getBuyOrderBook(){
                    let data = {
                        contractid:"0.0.140062",
                        memo:"Getting Sell Order Book",
                        params:'["'+tokenSymbol+'"]',
                        amount:0,
                        abi:`[{"constant":false,"inputs":[{"name":"symbolName","type":"string"}],"name":"getSellOrderBook", "outputs":[{"name":"","type":"uint256[]"},{"name":"","type":"uint256[]"}], "payable":false,"stateMutability":"nonpayable","type":"function"}]`
                    }



                    var res = await window.hash.triggerSmartContract(data)
                    console.log(res["result"]);

                    toastr.info("Fetching sell orders");
                    var ethToTokenArr = res["result"];
                    var indEthToTokenArr = [];
                    for (var i = 0; i < 1; i++) {
                      for (var i = 0; i < ethToTokenArr[0].length; i++) {
                        var everyOrderArr = [];
                        everyOrderArr.push(ethToTokenArr[1][i]);
                        everyOrderArr.push(ethToTokenArr[0][i]);
                        //everyOrderArr.push(ethToTokenArr[1][i]/ethToTokenArr[0][i]);
                        indEthToTokenArr.push(everyOrderArr);
                      }
                    }

                    sellOrdersTable = $('#sell-orders').DataTable({
                                data: indEthToTokenArr,
                                //bPaginate: false,
                                bFilter: false,
                                bInfo: false,
                                columns: [
                                    {title: tokenSymbol},
                                    {title: "Rate"}
                                ],
                                responsive: true
                            }
                    );
                    $('#loadingDiv-sell').remove();
                  }

              })

              document.getElementById('getTokenBalance').addEventListener('click',(e) => {
                  e.preventDefault();
                  getTokenBBalance();
                  async function getTokenBBalance(){
                    let data = {
                        contractid:"0.0.140062",
                        memo:"Getting Token Balance",
                        params:'["'+tokenSymbol+'"]',
                        amount:0,
                        abi:`[{"constant":false,"inputs":[{"name":"symbolName","type":"string"}],"name":"getBalance", "outputs":[{"name":"","type":"uint256"}], "payable":false,"stateMutability":"nonpayable","type":"function"}]`
                    }

                    var res = await window.hash.triggerSmartContract(data)
                    console.log(res);
                    toastr.info("DEX balance of "+tokenSymbol+" is "+res['result']+"");
                    $("#token-balance").html(res['result']);
                  }
              })

              document.getElementById('getETHBBalance').addEventListener('click',(e) => {
                  e.preventDefault();
                  getETHBBalance();
                  async function getETHBBalance(){
                    let data = {
                        contractid:"0.0.140062",
                        memo:"Getting ETHB Balance",
                        params:'[]',
                        amount:0,
                        abi:`[{"constant":false,"name":"getEthBalanceInWei", "inputs": [], "outputs":[{"name":"","type":"uint256"}], "payable":false,"stateMutability":"nonpayable","type":"function"}]`
                    }

                    var res = await window.hash.triggerSmartContract(data)
                    console.log(res);
                    toastr.info("DEX balance of ETHB is "+res['result']+"");
                    $("#eth-balance").html(res['result']);
                  }
              })

              document.getElementById('getETHBBalance').addEventListener('click',(e) => {
                  e.preventDefault();
                  getETHBBalance();
                  async function getETHBBalance(){
                    let data = {
                        contractid:"0.0.140062",
                        memo:"Getting ETHB Balance",
                        params:'[]',
                        amount:0,
                        abi:`[{"constant":false,"name":"getEthBalanceInWei", "inputs": [], "outputs":[{"name":"","type":"uint256"}], "payable":false,"stateMutability":"nonpayable","type":"function"}]`
                    }

                    var res = await window.hash.triggerSmartContract(data)
                    console.log(res);
                    toastr.info("DEX balance of ETHB is "+res['result']+"");
                    $("#eth-balance").html(res['result']);
                  }
              })



              if(tokenSymbol != null){
                $("#tokenSymbol").html(tokenSymbol+" Orderbook");
                //$("#breadCrumbTokenName").html(tokenSymbol+" Orderbook");
                $("#balanceHeaderTokenSymbol").html(tokenSymbol);
                $("#balance-tokenName").html(tokenSymbol);
              }else{
                $("#alertModalText").html("Error");
                $("#alertModalBody").html("<p>No donut for you!</p>");
                $("#alert-close-btn").attr("disabled", "disabled");
                $("#alert-cross-close-btn").attr("disabled", "disabled");
                $("#alertModal").modal({
                  backdrop: "static",
                  keyboard: false,
                  show: true
                });
              }


              //Update balance modal
              $( "#tokenBalance, #ethBalance, #kncBalance" ).click(function() {
                if(this.id == "tokenBalance"){
                  $("#tokenBalanceTitleInModal, #tokenDepositTitleInModal").html(tokenSymbol);
                  $("#withdrawBalanceAmount").val($("#token-balance").html());
                  $("#depositBalanceAmount").val(tokenBalanceInWallet);
                }else if(this.id == "ethBalance"){
                  $("#tokenBalanceTitleInModal, #tokenDepositTitleInModal").html("ETHB");
                  $("#withdrawBalanceAmount").val($("#eth-balance").html());
                  $("#depositBalanceAmount").val(etherBalanceInWallet);
                }else{
                  $("#tokenBalanceTitleInModal, #tokenDepositTitleInModal").html("KNC");
                  $("#withdrawBalanceAmount").val($("#knc-balance").html());
                  $("#depositBalanceAmount").val(kncBalanceInWallet);
                }
              });

              //deposit token balance
              async function depositTokenBalanceInHedera(depositAmount){
                toastr.info("Approving from token contract");
                console.log(tokenAddress);
                  var tokenParam = window.hash.accountIdToEthAddress("0.0.140062");
                  console.log(tokenParam);
                let dataApprove = {
                    contractid:tokenAddress,
                    memo:"Approving token balance",
                    params:'["'+tokenParam+'", '+depositAmount+']',
                    amount:0,
                    abi:`[{"constant":false,"name":"approve", "inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}], "outputs":[{"name":"","type":"bool"}], "payable":false,"stateMutability":"nonpayable","type":"function"}]`
                }

                console.log(dataApprove);

                var res1 = await window.hash.triggerSmartContract(dataApprove)
                console.log(res1);

                toastr.info("Depositing in DEX contract");
                let data = {
                    contractid:"0.0.140062",
                    memo:"Depositing token balance",
                    params:'["'+tokenSymbol+'", '+depositAmount+']',
                    amount:0,
                    abi:`[{"constant":false,"name":"depositToken", "inputs":[{"name":"symbolName","type":"string"},{"name":"amountTokens","type":"uint256"}], "outputs":[{"name":"","type":"uint256"}], "payable":false,"stateMutability":"nonpayable","type":"function"}]`
                }

                var res = await window.hash.triggerSmartContract(data)
                console.log(res);
                return res;
              }

              //deposit ethb balance
              async function depositETHBBalanceInHedera(depositAmount){
                toastr.info("Approving from token contract");
                var tokenParam = window.hash.accountIdToEthAddress("0.0.140062");
                let dataApprove = {
                    contractid:"0.0.139693",
                    memo:"Approving token balance",
                    params:'["'+tokenParam+'", '+depositAmount+']',
                    amount:0,
                    abi:`[{"constant":false,"name":"approve", "inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}], "outputs":[{"name":"","type":"bool"}], "payable":false,"stateMutability":"nonpayable","type":"function"}]`
                }
                console.log(tokenParam);
                console.log(dataApprove);
                var res1 = await window.hash.triggerSmartContract(dataApprove)
                console.log(res1);
                toastr.info("Depositing in DEX contract");
                let data = {
                    contractid:"0.0.140062",
                    memo:"Depositing ETHB balance",
                    params:'["ETHB", '+depositAmount+']',
                    amount:0,
                    abi:`[{"constant":false,"name":"depositEtherB", "inputs":[{"name":"symbolName","type":"string"},{"name":"amountTokens","type":"uint256"}], "payable":false,"stateMutability":"nonpayable","type":"function"}]`
                }

                var res = await window.hash.triggerSmartContract(data)
                console.log(res);
                return res;
              }

              //Handle Withdraw/Deposit for tokens
              $( "#withdrawBalanceModalBtn, #depositBalanceModalBtn" ).click(async function() {
                event.preventDefault();
                $(".modal-backdrop").remove();
                var modalTitle = $("#tokenBalanceTitleInModal").html();
                if(this.id == "withdrawBalanceModalBtn"){
                  var withdrawAmount = $("#withdrawBalanceAmount").val();
                  if(withdrawAmount == 0 || isNaN(parseInt(withdrawAmount, 10))){
                    errorModal("Please provide a valid amount to withdraw!");
                  }else{
                    $("#balanceModal").modal("hide");
                    if(modalTitle == tokenSymbol){
                      toastr.info("Withdrawing "+withdrawAmount+" "+tokenSymbol+" from the token reserve");
                      var result = await withdrawTokenBalance(reserveContractAddress, tokenAddress, withdrawAmount);
                      if(result.transactionHash != undefined){
                        var tokenBalance = await getTokenBalanceInReserve(reserveContractAddress, tokenAddress);
                        $("#token-balance").html(tokenBalance);
                        toastr.success("Operation completed!", "Withdraw successful!");
                      }else{
                        errorModal(result);
                      }
                    }else if(modalTitle == "ETH"){
                      toastr.info("Withdrawing "+withdrawAmount+" ETH from the token reserve");
                      var result = await withdrawEtherBalance(reserveContractAddress, withdrawAmount);
                      if(result.transactionHash != undefined){
                        var ethBalance = await getTokenBalanceInReserve(reserveContractAddress);
                        $("#eth-balance").html(ethBalance);
                        toastr.success("Operation completed!", "Withdraw successful!");
                      }else{
                        errorModal(result);
                      }
                    }else if(modalTitle == "KNC"){
                      toastr.info("Withdrawing "+withdrawAmount+" KNC from the token reserve");
                      var result = await withdrawKncFeeBalance(reserveContractAddress, withdrawAmount);
                      if(result.transactionHash != undefined){
                        var kncBalance = await getKncBalanceInReserve(reserveContractAddress);
                        $("#knc-balance").html(kncBalance);
                        toastr.success("Operation completed!", "Withdraw successful!");
                      }else{
                        errorModal(result);
                      }
                    }
                  }
                }else if(this.id == "depositBalanceModalBtn"){
                  var depositAmount = $("#depositBalanceAmount").val();
                  if(depositAmount == 0 || isNaN(parseInt(depositAmount, 10))){
                    errorModal("Please provide a valid amount to deposit!")
                  }else{
                    $("#balanceModal").modal("hide");
                    if(modalTitle == tokenSymbol){
                      toastr.info("Approving and depositing "+depositAmount+" "+tokenSymbol+" to the token reserve");
                      var result = await depositTokenBalanceInHedera(depositAmount);
                      if(result['result']){
                        toastr.success("Operation completed!", "Deposit successful!");
                      }else{
                        errorModal("Error");
                      }
                    }else if(modalTitle == "ETHB"){
                      toastr.info("Depositing "+depositAmount+" ETHB to the DEX contract");
                      var result = await depositETHBBalanceInHedera(depositAmount);
                      if(result['result']){
                        toastr.success("Operation completed!", "Deposit successful!");
                      }else{
                        errorModal("Errror");
                      }
                    }
                  }
                }
              });

              $("#successModal").on("hidden.bs.modal", function () {
                  //location.reload();
              });


              //Switch order modal for buy/sell
              $( "#sellOrder, #buyOrder" ).click(function() {
                $('#orderModalForm').trigger("reset");
                if(this.id == "sellOrder"){
                  $("#orderModalTitle").html("Add Sell Order");
                  $("#destinationToken").html("ETHB");
                  $("#sourceToken").html(tokenSymbol);
                }else{
                  $("#orderModalTitle").html("Add Buy Order");
                  $("#destinationToken").html(tokenSymbol);
                  $("#sourceToken").html(tokenSymbol);
                }
              });

              // Handle buy/sell order form inputs
              $( "#orderModalForm" ).submit(async function( event ) {
                event.preventDefault();
                $(".modal-backdrop").remove();
                var srcQty = $("#sourceTokenQuantity").val();
                //var destQty = $("#destinationTokenQuantity").val();

                var srcToken = $("#sourceToken").html();
                //var destToken = $("#destinationToken").html();

                var modalTitle = $("#orderModalTitle").html();

                var priceInWei = $("#desiredRate").val();


                  $("#orderModal").modal("hide");
                  if(modalTitle == "Add Buy Order"){


                        //its a buy order - EthToToken
                        toastr.info("Placing buy order...");

                        submitBuyOrder();
                        async function submitBuyOrder(){
                          let data = {
                              contractid:"0.0.140062",
                              memo:"Submitting Buy Order",
                              params:'["'+tokenSymbol+'","'+priceInWei+'","'+srcQty+'"]',
                              amount:0,
                              abi:`[{"constant":false,"inputs":[{"name":"symbolName","type":"string"},{"name":"priceInWei","type":"uint256"},{"name":"amount","type":"uint256"}],"name":"buyToken","payable":false,"stateMutability":"nonpayable","type":"function"}]`
                          }



                          var res = await window.hash.triggerSmartContract(data)
                          console.log(res['result']);

                          if(res['result'] == ''){
                            //refreshDataTables();
                            toastr.success("Operation completed!", "Buy order successful!");
                          }else{
                            errorModal("Error placing buy order. Please try again with correct values!");
                          }
                        }



                  }else{

                      //its a sell order - TokenToEth
                      toastr.info("Placing sell order...");
                      var priceInWei = $("#desiredRate").val();
                      console.log('["'+tokenSymbol+'","'+priceInWei+'","'+srcQty+'"]');
                      submitSellOrder();
                      async function submitSellOrder(){
                        let data = {
                            contractid:"0.0.140062",
                            memo:"Submitting Sell Order",
                            params:'["'+tokenSymbol+'","'+priceInWei+'","'+srcQty+'"]',
                            amount:0,
                            abi:`[{"constant":false,"inputs":[{"name":"symbolName","type":"string"},{"name":"priceInWei","type":"uint256"},{"name":"amount","type":"uint256"}],"name":"sellToken","payable":false,"stateMutability":"nonpayable","type":"function"}]`
                        }

                        var res = await window.hash.triggerSmartContract(data)
                        console.log(res['result']);

                        if(res['result'] == ''){
                          //refreshDataTables();
                          toastr.success("Operation completed!", "Sell order successful!");
                        }else{
                          errorModal("Error placing sell order. Please try again with correct values!");
                        }
                      }


                  }


              });



              getOrderBookDetails = async function(){
                  toastr.clear();
              }



              refreshDataTables = function(){
                sellOrdersTable.destroy();
                buyOrdersTable.destroy();
                myOrdersTable.destroy();
                toastr.info("Fetching updated balance");
                getBalance();
                getOrderBookDetails();
              }

              getOrderBookDetails();


            });


    </script>
    </body>
    <!-- end::Body -->
</html>
